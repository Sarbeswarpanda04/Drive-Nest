<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Drive Nest - Your personal cloud storage solution">
    <title>Drive Nest - Personal Cloud Storage</title>
    
    <!-- PWA Meta Tags -->
    <meta name="application-name" content="Drive Nest">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Drive Nest">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="msapplication-starturl" content="/">
    <meta name="msapplication-TileColor" content="#4F46E5">
    <meta name="theme-color" content="#4F46E5">
    
    <!-- Manifest and Favicon -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    
    <!-- CSS Imports -->
    <link rel="stylesheet" href="styles/base.css">
    <link rel="stylesheet" href="styles/theme.css">
    <link rel="stylesheet" href="styles/components.css">
    <link rel="stylesheet" href="styles/preview.css">
    <link rel="stylesheet" href="styles/homepage.css">
    <link rel="stylesheet" href="styles/splash.css">
    
    <!-- Scripts -->
    <script>
        // Enhanced Splash Screen Controller
        window.splashController = {
            statusMessages: [
                "Initializing...",
                "Loading core modules...",
                "Connecting to Firebase...",
                "Setting up security...",
                "Preparing workspace...",
                "Almost ready..."
            ],
            
            currentMessageIndex: 0,
            statusElement: null,
            
            init() {
                this.statusElement = document.getElementById('loading-status-text');
                this.startStatusUpdates();
                
                // Auto-hide splash screen after loading
                setTimeout(() => {
                    this.hideSplash();
                }, 4000); // Show splash for 4 seconds
            },
            
            startStatusUpdates() {
                const updateStatus = () => {
                    if (this.statusElement && this.currentMessageIndex < this.statusMessages.length) {
                        this.statusElement.textContent = this.statusMessages[this.currentMessageIndex];
                        this.currentMessageIndex++;
                        
                        if (this.currentMessageIndex < this.statusMessages.length) {
                            setTimeout(updateStatus, 600);
                        }
                    }
                };
                
                setTimeout(updateStatus, 500);
            },
            
            hideSplash() {
                const splashScreen = document.getElementById('loading-screen');
                if (splashScreen) {
                    splashScreen.style.animation = 'splashFadeOut 0.8s ease-in forwards';
                    
                    setTimeout(() => {
                        splashScreen.style.display = 'none';
                        
                        // Show the auth gate
                        const authGate = document.getElementById('auth-gate');
                        if (authGate) {
                            authGate.classList.remove('hidden');
                            authGate.style.animation = 'fadeIn 0.8s ease-out';
                        }
                    }, 800);
                }
            }
        };

        // Error handler to catch and display errors
        window.addEventListener('error', (e) => {
            console.error('Global Error:', e.error);
            const loading = document.getElementById('loading-screen');
            if (loading) {
                loading.innerHTML = `
                    <div class="loading-content">
                        <div style="color: red; text-align: center; padding: 20px;">
                            <h3>‚ö†Ô∏è Loading Error</h3>
                            <p>Error: ${e.error?.message || e.message}</p>
                            <p><strong>Drive Nest is running in Demo Mode</strong></p>
                            <p>Firebase configuration is not set up yet.</p>
                            <button onclick="location.reload()" style="margin-top: 10px; padding: 10px 20px; background: #4F46E5; color: white; border: none; border-radius: 5px; cursor: pointer;">
                                Retry
                            </button>
                        </div>
                    </div>
                `;
            }
        });

        // Unhandled promise rejection handler
        window.addEventListener('unhandledrejection', (e) => {
            console.error('Unhandled Promise Rejection:', e.reason);
        });

        // Initialize splash screen when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            window.splashController.init();
        });

        // Function to continue to demo
        window.continueDemo = () => {
            const loading = document.getElementById('loading-screen');
            if (loading) {
                loading.style.display = 'none';
            }
            
            // Show the main app
            const authGate = document.getElementById('auth-gate');
            if (authGate) {
                authGate.style.display = 'none';
            }
            
            const dashboard = document.getElementById('dashboard');
            if (dashboard) {
                dashboard.style.display = 'block';
                
                // Simulate user login
                const userAvatar = dashboard.querySelector('.user-avatar');
                const userName = dashboard.querySelector('.user-name');
                const userEmail = dashboard.querySelector('.user-email');
                
                if (userAvatar) userAvatar.src = 'https://via.placeholder.com/40x40/4F46E5/FFFFFF?text=DU';
                if (userName) userName.textContent = 'Demo User';
                if (userEmail) userEmail.textContent = 'demo@example.com';
                
                // Show demo files
                showDemoFiles();
            }
        };

        // Function to show demo files
        window.showDemoFiles = () => {
            const fileGrid = document.getElementById('file-grid');
            if (fileGrid) {
                fileGrid.innerHTML = `
                    <div class="file-item" onclick="showDemoPreview('Welcome to Drive Nest.pdf')">
                        <div class="file-icon">üìÑ</div>
                        <div class="file-info">
                            <div class="file-name">Welcome to Drive Nest.pdf</div>
                            <div class="file-details">2.4 MB ‚Ä¢ 2 days ago</div>
                        </div>
                    </div>
                    <div class="file-item" onclick="showDemoPreview('Project Presentation.pptx')">
                        <div class="file-icon">üìä</div>
                        <div class="file-info">
                            <div class="file-name">Project Presentation.pptx</div>
                            <div class="file-details">5.0 MB ‚Ä¢ 1 day ago</div>
                        </div>
                    </div>
                    <div class="file-item" onclick="showDemoPreview('Team Photo.jpg')">
                        <div class="file-icon">üñºÔ∏è</div>
                        <div class="file-info">
                            <div class="file-name">Team Photo.jpg</div>
                            <div class="file-details">1.0 MB ‚Ä¢ 1 hour ago</div>
                        </div>
                    </div>
                    <div class="file-item" onclick="showDemoPreview('Meeting Notes.docx')">
                        <div class="file-icon">üìù</div>
                        <div class="file-info">
                            <div class="file-name">Meeting Notes.docx</div>
                            <div class="file-details">512 KB ‚Ä¢ Just now</div>
                        </div>
                    </div>
                `;
            }
        };

        // Function to show demo preview
        window.showDemoPreview = (fileName) => {
            alert(`Demo Mode: This would open a preview for "${fileName}". In the full version, you'd see an interactive preview with zoom, download, and sharing options.`);
        };
    </script>
    <script type="module" src="scripts/app.js"></script>
    
    <!-- Service Worker Registration -->
    <script>
        // Register service worker for PWA functionality
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', async () => {
                try {
                    const registration = await navigator.serviceWorker.register('/sw.js');
                    console.log('Service Worker registered:', registration);
                    
                    // Handle updates
                    registration.addEventListener('updatefound', () => {
                        const newWorker = registration.installing;
                        if (newWorker) {
                            newWorker.addEventListener('statechange', () => {
                                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    // Show update notification
                                    if (window.app && window.app.showUpdateNotification) {
                                        window.app.showUpdateNotification();
                                    }
                                }
                            });
                        }
                    });
                } catch (error) {
                    console.error('Service Worker registration failed:', error);
                }
            });
        }
        
        // Handle app installation prompt
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            
            // Show install button or banner
            if (window.app && window.app.showInstallPrompt) {
                window.app.showInstallPrompt();
            }
        });
        
        // Handle app installation
        window.installApp = async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                console.log('PWA install outcome:', outcome);
                deferredPrompt = null;
            }
        };
    </script>
</head>
<body data-theme="system">

    <!-- Splash Screen -->
    <div id="loading-screen" class="splash-screen">
        <!-- Animated Background -->
        <div class="splash-background">
            <div class="splash-particle particle-1"></div>
            <div class="splash-particle particle-2"></div>
            <div class="splash-particle particle-3"></div>
            <div class="splash-particle particle-4"></div>
            <div class="splash-particle particle-5"></div>
            <div class="splash-particle particle-6"></div>
            <div class="splash-wave wave-1"></div>
            <div class="splash-wave wave-2"></div>
            <div class="splash-wave wave-3"></div>
        </div>

        <!-- Splash Content -->
        <div class="splash-content">
            <!-- Logo Section -->
            <div class="splash-logo-container">
                <!-- Main Logo Image -->
                <div class="splash-logo-wrapper">
                    <img src="assets/images/drive-nest-logo.png" alt="Drive Nest Logo" class="splash-logo-img" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <!-- Fallback SVG Logo -->
                    <div class="splash-logo-fallback" style="display: none;">
                        <svg class="splash-logo-svg" viewBox="0 0 140 140" width="140" height="140">
                            <defs>
                                <linearGradient id="splashGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#8b5cf6;stop-opacity:1" />
                                    <stop offset="30%" style="stop-color:#a855f7;stop-opacity:1" />
                                    <stop offset="70%" style="stop-color:#7c3aed;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#6d28d9;stop-opacity:1" />
                                </linearGradient>
                                <filter id="splashGlow" x="-50%" y="-50%" width="200%" height="200%">
                                    <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
                                    <feMerge> 
                                        <feMergeNode in="coloredBlur"/>
                                        <feMergeNode in="SourceGraphic"/>
                                    </feMerge>
                                </filter>
                                <filter id="innerShadow">
                                    <feOffset dx="0" dy="2"/>
                                    <feGaussianBlur stdDeviation="3"/>
                                    <feComposite operator="over"/>
                                </filter>
                            </defs>
                            
                            <!-- Outer glow ring -->
                            <circle cx="70" cy="70" r="60" fill="none" stroke="url(#splashGradient)" stroke-width="2" opacity="0.3" filter="url(#splashGlow)">
                                <animate attributeName="r" values="55;65;55" dur="3s" repeatCount="indefinite"/>
                                <animate attributeName="opacity" values="0.1;0.4;0.1" dur="3s" repeatCount="indefinite"/>
                            </circle>
                            
                            <!-- Main cloud structure -->
                            <path d="M25 60 Q25 40 45 40 Q70 20 95 40 Q115 40 115 60 Q115 80 95 80 L45 80 Q25 80 25 60 Z" 
                                  fill="url(#splashGradient)" opacity="0.9" filter="url(#splashGlow)">
                                <animateTransform attributeName="transform" type="scale" values="1;1.08;1" dur="4s" repeatCount="indefinite"/>
                            </path>
                            
                            <!-- Inner cloud layer -->
                            <path d="M35 65 Q35 50 50 50 Q70 35 90 50 Q105 50 105 65 Q105 80 90 80 L50 80 Q35 80 35 65 Z" 
                                  fill="url(#splashGradient)" opacity="0.7">
                                <animateTransform attributeName="transform" type="scale" values="0.95;1.02;0.95" dur="3.5s" repeatCount="indefinite"/>
                            </path>
                            
                            <!-- File dots with pulsing animation -->
                            <circle cx="50" cy="65" r="4" fill="white" opacity="0.95" filter="url(#innerShadow)">
                                <animate attributeName="opacity" values="0.6;1;0.6" dur="2s" repeatCount="indefinite"/>
                                <animate attributeName="r" values="3;5;3" dur="2s" repeatCount="indefinite"/>
                            </circle>
                            <circle cx="70" cy="60" r="4" fill="white" opacity="0.95" filter="url(#innerShadow)">
                                <animate attributeName="opacity" values="1;0.6;1" dur="2s" repeatCount="indefinite"/>
                                <animate attributeName="r" values="4;6;4" dur="2s" repeatCount="indefinite"/>
                            </circle>
                            <circle cx="90" cy="65" r="4" fill="white" opacity="0.95" filter="url(#innerShadow)">
                                <animate attributeName="opacity" values="0.6;1;0.6" dur="2s" repeatCount="indefinite"/>
                                <animate attributeName="r" values="3;5;3" dur="2s" repeatCount="indefinite"/>
                            </circle>
                            
                            <!-- Nest base -->
                            <path d="M45 90 Q70 100 95 90" stroke="url(#splashGradient)" stroke-width="3" fill="none" opacity="0.6">
                                <animate attributeName="opacity" values="0.4;0.8;0.4" dur="3s" repeatCount="indefinite"/>
                            </path>
                            <path d="M55 95 Q70 102 85 95" stroke="url(#splashGradient)" stroke-width="2" fill="none" opacity="0.4">
                                <animate attributeName="opacity" values="0.2;0.6;0.2" dur="2.5s" repeatCount="indefinite"/>
                            </path>
                        </svg>
                    </div>
                </div>

                <!-- Logo Ring Animation -->
                <div class="splash-logo-ring"></div>
            </div>

            <!-- Brand Section -->
            <div class="splash-brand">
                <h1 class="splash-title">
                    <span class="title-word word-1">Drive</span>
                    <span class="title-word word-2">Nest</span>
                </h1>
                <p class="splash-tagline">Your Personal Cloud Storage Solution</p>
            </div>

            <!-- Loading Animation -->
            <div class="splash-loading">
                <div class="loading-dots">
                    <div class="dot dot-1"></div>
                    <div class="dot dot-2"></div>
                    <div class="dot dot-3"></div>
                    <div class="dot dot-4"></div>
                    <div class="dot dot-5"></div>
                </div>
                <div class="loading-bar">
                    <div class="loading-progress"></div>
                    <div class="loading-shimmer"></div>
                </div>
            </div>

            <!-- Credits -->
            <div class="splash-credits">
                <p class="credits-text">
                    <span class="credits-by">Crafted by</span>
                    <span class="credits-name">Sarbeswar Panda</span>
                </p>
                <div class="credits-decoration"></div>
            </div>
        </div>

        <!-- Loading Status Text -->
        <div class="splash-status">
            <span id="loading-status-text">Initializing...</span>
        </div>
    </div>

    <!-- Auth Gate -->
    <div id="auth-gate" class="auth-gate hidden">
        <div class="auth-content">
            <!-- Background Animation -->
            <div class="auth-background">
                <div class="floating-shape shape-1"></div>
                <div class="floating-shape shape-2"></div>
                <div class="floating-shape shape-3"></div>
                <div class="floating-shape shape-4"></div>
            </div>

            <header class="hero">
                <div class="hero-logo-container">
                    <!-- Main Logo Image (will be added) -->
                    <div class="logo-wrapper">
                        <img src="assets/images/drive-nest-logo.png" alt="Drive Nest Logo" class="main-logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                        <!-- Fallback SVG Logo -->
                        <div class="fallback-logo" style="display: none;">
                            <svg class="logo large" viewBox="0 0 120 120" width="120" height="120">
                                <defs>
                                    <linearGradient id="heroGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" style="stop-color:#8b5cf6;stop-opacity:1" />
                                        <stop offset="50%" style="stop-color:#a855f7;stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#7c3aed;stop-opacity:1" />
                                    </linearGradient>
                                    <filter id="glow">
                                        <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                                        <feMerge> 
                                            <feMergeNode in="coloredBlur"/>
                                            <feMergeNode in="SourceGraphic"/>
                                        </feMerge>
                                    </filter>
                                </defs>
                                <!-- Cloud-like nest structure -->
                                <circle cx="60" cy="60" r="45" fill="url(#heroGradient)" opacity="0.1" filter="url(#glow)"/>
                                <path d="M30 50 Q30 35 45 35 Q60 20 75 35 Q90 35 90 50 Q90 65 75 65 L45 65 Q30 65 30 50 Z" fill="url(#heroGradient)" opacity="0.8"/>
                                <circle cx="40" cy="55" r="4" fill="white" opacity="0.9"/>
                                <circle cx="60" cy="50" r="4" fill="white" opacity="0.9"/>
                                <circle cx="80" cy="55" r="4" fill="white" opacity="0.9"/>
                                <!-- Nest elements -->
                                <path d="M45 75 Q60 85 75 75" stroke="url(#heroGradient)" stroke-width="3" fill="none" opacity="0.7"/>
                                <path d="M50 80 Q60 87 70 80" stroke="url(#heroGradient)" stroke-width="2" fill="none" opacity="0.5"/>
                            </svg>
                        </div>
                    </div>
                    <!-- Logo text with enhanced styling -->
                    <div class="brand-text">
                        <h1 class="hero-title">Drive Nest</h1>
                        <div class="brand-subtitle">Cloud Storage Reimagined</div>
                    </div>
                </div>
                
                <div class="hero-content">
                    <p class="hero-tagline">Your secure personal cloud storage solution with intelligent file management</p>
                    <div class="hero-stats">
                        <div class="stat">
                            <div class="stat-number">1GB</div>
                            <div class="stat-label">Free Storage</div>
                        </div>
                        <div class="stat">
                            <div class="stat-number">‚àû</div>
                            <div class="stat-label">File Types</div>
                        </div>
                        <div class="stat">
                            <div class="stat-number">100%</div>
                            <div class="stat-label">Secure</div>
                        </div>
                    </div>
                </div>
            </header>
            
            <div class="features">
                <div class="feature glass-card">
                    <div class="feature-icon-wrapper">
                        <div class="feature-icon">ÔøΩÔ∏è</div>
                    </div>
                    <div class="feature-content">
                        <h3>Smart Organization</h3>
                        <p>AI-powered file categorization and intelligent search across all your documents</p>
                    </div>
                </div>
                <div class="feature glass-card">
                    <div class="feature-icon-wrapper">
                        <div class="feature-icon">ÔøΩ</div>
                    </div>
                    <div class="feature-content">
                        <h3>Bank-Grade Security</h3>
                        <p>End-to-end encryption with granular sharing permissions and access controls</p>
                    </div>
                </div>
                <div class="feature glass-card">
                    <div class="feature-icon-wrapper">
                        <div class="feature-icon">‚ö°</div>
                    </div>
                    <div class="feature-content">
                        <h3>Lightning Fast</h3>
                        <p>Instant uploads, real-time sync, and blazing-fast file access from anywhere</p>
                    </div>
                </div>
                <div class="feature glass-card">
                    <div class="feature-icon-wrapper">
                        <div class="feature-icon">üéØ</div>
                    </div>
                    <div class="feature-content">
                        <h3>Smart Preview</h3>
                        <p>Preview any file type instantly without downloading - images, docs, videos & more</p>
                    </div>
                </div>
            </div>

            <!-- Trust Indicators -->
            <div class="trust-section">
                <div class="trust-item">
                    <span class="trust-icon">‚úÖ</span>
                    <span>Zero-Knowledge Architecture</span>
                </div>
                <div class="trust-item">
                    <span class="trust-icon">üåê</span>
                    <span>Cross-Platform Support</span>
                </div>
                <div class="trust-item">
                    <span class="trust-icon">‚ö°</span>
                    <span>Real-time Synchronization</span>
                </div>
            </div>
            
            <div class="auth-actions">
                <button id="google-signin-btn" class="btn btn-primary btn-large btn-hero">
                    <div class="btn-content">
                        <svg width="24" height="24" viewBox="0 0 24 24">
                            <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                            <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                            <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                            <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                        </svg>
                        <span>Get Started with Google</span>
                    </div>
                    <div class="btn-shine"></div>
                </button>
                
                <div class="auth-footer">
                    <p class="privacy-notice">
                        <span class="privacy-icon">üîí</span>
                        Your privacy is protected. We never access your files or personal data.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Dashboard -->
    <div id="dashboard" class="dashboard hidden">
        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <div class="logo-container">
                    <!-- Main Logo Image -->
                    <img src="assets/images/drive-nest-logo.png" alt="Drive Nest Logo" class="sidebar-logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                    <!-- Fallback SVG Logo -->
                    <svg class="logo sidebar-fallback" viewBox="0 0 120 120" width="40" height="40" style="display: none;">
                        <defs>
                            <linearGradient id="sidebarGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#8b5cf6;stop-opacity:1" />
                                <stop offset="50%" style="stop-color:#a855f7;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#7c3aed;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                        <circle cx="60" cy="60" r="45" fill="url(#sidebarGradient)" opacity="0.1"/>
                        <path d="M30 50 Q30 35 45 35 Q60 20 75 35 Q90 35 90 50 Q90 65 75 65 L45 65 Q30 65 30 50 Z" fill="url(#sidebarGradient)" opacity="0.8"/>
                        <circle cx="40" cy="55" r="3" fill="white" opacity="0.9"/>
                        <circle cx="60" cy="50" r="3" fill="white" opacity="0.9"/>
                        <circle cx="80" cy="55" r="3" fill="white" opacity="0.9"/>
                    </svg>
                </div>
                <span class="sidebar-title">Drive Nest</span>
            </div>
            
            <ul class="sidebar-nav">
                <li><a href="#" data-view="my-files" class="nav-link active">
                    <span class="nav-icon">üìÅ</span>
                    <span class="nav-text">My Files</span>
                </a></li>
                <li><a href="#" data-view="shared" class="nav-link">
                    <span class="nav-icon">üë•</span>
                    <span class="nav-text">Shared with me</span>
                </a></li>
                <li><a href="#" data-view="starred" class="nav-link">
                    <span class="nav-icon">‚≠ê</span>
                    <span class="nav-text">Starred</span>
                </a></li>
                <li><a href="#" data-view="recent" class="nav-link">
                    <span class="nav-icon">üïí</span>
                    <span class="nav-text">Recent</span>
                </a></li>
                <li><a href="#" data-view="trash" class="nav-link">
                    <span class="nav-icon">üóëÔ∏è</span>
                    <span class="nav-text">Trash</span>
                </a></li>
            </ul>
            
            <div class="storage-info">
                <div class="storage-header">
                    <span>Free Tier Storage</span>
                    <span id="storage-percentage">0%</span>
                </div>
                <div class="storage-bar">
                    <div class="storage-used" style="width: 0%"></div>
                </div>
                <div class="storage-text">
                    <span id="storage-used">0 MB</span> of <span id="storage-total">1 GB</span> used
                </div>
                <div class="storage-limit-info">
                    <small>‚ö†Ô∏è Files limited to 1MB each in free tier</small>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Bar -->
            <header class="top-bar">
                <div class="search-section">
                    <div class="search-input-container">
                        <input type="text" id="search-input" placeholder="Search files..." class="search-input">
                        <button class="search-btn">üîç</button>
                    </div>
                    <div class="filters">
                        <select id="type-filter" class="filter-select">
                            <option value="">All types</option>
                            <option value="image">Images</option>
                            <option value="video">Videos</option>
                            <option value="audio">Audio</option>
                            <option value="document">Documents</option>
                            <option value="archive">Archives</option>
                            <option value="other">Other</option>
                        </select>
                        <select id="sort-by" class="filter-select">
                            <option value="modified">Last modified</option>
                            <option value="name">Name</option>
                            <option value="size">Size</option>
                            <option value="created">Date created</option>
                        </select>
                    </div>
                </div>
                
                <div class="user-section">
                    <button id="view-toggle" class="btn btn-secondary" title="Toggle view">
                        <span class="view-icon">‚äû</span>
                    </button>
                    <button id="theme-toggle" class="btn btn-secondary" title="Toggle theme">
                        <span class="theme-icon">üåô</span>
                    </button>
                    <div class="user-menu">
                        <button id="user-menu-btn" class="user-avatar">
                            <img id="user-avatar-img" src="" alt="User Avatar" class="avatar-img">
                        </button>
                        <div id="user-dropdown" class="dropdown hidden">
                            <div class="dropdown-item">
                                <span id="user-name">User Name</span>
                                <span id="user-email" class="text-muted">user@email.com</span>
                            </div>
                            <div class="dropdown-divider"></div>
                            <button class="dropdown-item" id="settings-btn">Settings</button>
                            <button class="dropdown-item" id="signout-btn">Sign out</button>
                        </div>
                    </div>
                </div>
            </header>

            <!-- File Content Area -->
            <div class="content-area">
                <div class="content-header">
                    <div class="title-section">
                        <h2 id="view-title">My Files</h2>
                        <div class="breadcrumb" id="breadcrumb">
                            <span class="breadcrumb-item">My Files</span>
                        </div>
                    </div>
                    
                    <div class="content-actions">
                        <button class="btn btn-secondary" id="select-all-btn" title="Select All">
                            Select All
                        </button>
                        <button class="btn btn-secondary" id="new-folder-btn" title="New Folder">
                            üìÅ New Folder
                        </button>
                        <button class="btn btn-primary" id="header-upload-btn" title="Upload Files">
                            ‚¨ÜÔ∏è Upload
                        </button>
                    </div>
                </div>

                <!-- Selection Actions Bar -->
                <div id="selection-actions" class="selection-actions hidden">
                    <div class="selection-info">
                        <span id="selection-count">0</span> item(s) selected
                    </div>
                    <div class="selection-buttons">
                        <button class="btn btn-secondary" id="download-selected-btn">
                            üì• Download
                        </button>
                        <button class="btn btn-secondary" id="share-selected-btn">
                            üîó Share
                        </button>
                        <button class="btn btn-secondary" id="star-selected-btn">
                            ‚≠ê Star
                        </button>
                        <button class="btn btn-danger" id="delete-selected-btn">
                            üóëÔ∏è Delete
                        </button>
                    </div>
                </div>

                <!-- Quick Stats -->
                <div class="quick-stats">
                    <div class="stat-card">
                        <div class="stat-icon">üìÑ</div>
                        <div class="stat-info">
                            <span class="stat-value" id="total-files-count">0</span>
                            <span class="stat-label">Files</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìÅ</div>
                        <div class="stat-info">
                            <span class="stat-value" id="total-folders-count">0</span>
                            <span class="stat-label">Folders</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üíæ</div>
                        <div class="stat-info">
                            <span class="stat-value" id="storage-used-mb">0 MB</span>
                            <span class="stat-label">Used</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üïí</div>
                        <div class="stat-info">
                            <span class="stat-value" id="last-activity">Never</span>
                            <span class="stat-label">Last Activity</span>
                        </div>
                    </div>
                </div>

                <!-- Empty State -->
                <div id="empty-state" class="empty-state">
                    <div class="empty-icon">üìÇ</div>
                    <h3>No files yet</h3>
                    <p>Upload your first file to get started with Drive Nest</p>
                    <div class="empty-actions">
                        <button class="btn btn-primary" id="empty-upload-btn">
                            ‚¨ÜÔ∏è Upload Files
                        </button>
                        <button class="btn btn-secondary" id="empty-folder-btn">
                            üìÅ Create Folder
                        </button>
                    </div>
                    <div class="getting-started">
                        <h4>Getting Started:</h4>
                        <ul>
                            <li>üéØ Drag and drop files anywhere</li>
                            <li>üì± Maximum 1MB per file (Free Tier)</li>
                            <li>üîí All files are private and secure</li>
                            <li>üåê Access from any device</li>
                        </ul>
                    </div>
                </div>

                <!-- File Grid/List -->
                <div id="file-grid" class="file-grid"></div>
            </div>
        </main>

        <!-- Upload FAB -->
        <button id="upload-fab" class="upload-fab" title="Upload files">
            <span class="fab-icon">+</span>
        </button>
    </div>

    <!-- File Preview Modal -->
    <div id="preview-modal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content preview-modal-content">
            <header class="modal-header">
                <h3 id="preview-filename">File Preview</h3>
                <div class="modal-actions">
                    <button id="download-btn" class="btn btn-secondary">‚¨á Download</button>
                    <button id="share-btn" class="btn btn-secondary">üîó Share</button>
                    <button class="btn btn-secondary modal-close">‚úï</button>
                </div>
            </header>
            
            <div class="modal-body">
                <div class="preview-container">
                    <div id="preview-content" class="preview-content"></div>
                </div>
                
                <aside class="file-info">
                    <h4>File Information</h4>
                    <dl class="info-list">
                        <dt>Size</dt>
                        <dd id="info-size">-</dd>
                        <dt>Type</dt>
                        <dd id="info-type">-</dd>
                        <dt>Created</dt>
                        <dd id="info-created">-</dd>
                        <dt>Modified</dt>
                        <dd id="info-modified">-</dd>
                        <dt>Owner</dt>
                        <dd id="info-owner">-</dd>
                    </dl>
                    
                    <div class="file-actions">
                        <button class="btn btn-outline" id="rename-btn">‚úèÔ∏è Rename</button>
                        <button class="btn btn-outline" id="star-btn">‚≠ê Star</button>
                        <button class="btn btn-outline" id="move-btn">üìÅ Move</button>
                        <button class="btn btn-outline" id="duplicate-btn">üìÑ Duplicate</button>
                        <button class="btn btn-danger" id="delete-btn">üóëÔ∏è Delete</button>
                    </div>
                </aside>
            </div>
        </div>
    </div>

    <!-- Upload Modal -->
    <div id="upload-modal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <header class="modal-header">
                <h3>Upload Files</h3>
                <button class="btn btn-secondary modal-close">‚úï</button>
            </header>
            
            <div class="modal-body">
                <!-- Free Tier Warning -->
                <div class="upload-warning">
                    <div class="warning-header">
                        <span class="warning-icon">‚ö†Ô∏è</span>
                        <strong>Free Tier Limitations</strong>
                    </div>
                    <ul class="warning-list">
                        <li>Maximum file size: <strong>1MB per file</strong></li>
                        <li>Total storage: <strong>1GB</strong></li>
                        <li>Supported: Images, documents, audio, video, text files</li>
                        <li>Files stored securely in Firestore</li>
                    </ul>
                </div>
                
                <div class="upload-area" id="upload-area">
                    <div class="upload-icon">‚¨ÜÔ∏è</div>
                    <h4>Drag files here or click to browse</h4>
                    <p>Any file type supported ‚Ä¢ Max <strong>1MB</strong> per file (Free Tier)</p>
                    <input type="file" id="file-input" multiple accept="*/*" hidden>
                </div>
                
                <div id="upload-queue" class="upload-queue hidden">
                    <h4>Upload Queue</h4>
                    <div id="upload-items" class="upload-items"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Share Modal -->
    <div id="share-modal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <header class="modal-header">
                <h3>Share File</h3>
                <button class="btn btn-secondary modal-close">‚úï</button>
            </header>
            
            <div class="modal-body">
                <div class="share-section">
                    <h4>Link Sharing</h4>
                    <div class="share-option">
                        <input type="radio" name="shareType" value="private" id="share-private" checked>
                        <label for="share-private">Private - Only you can access</label>
                    </div>
                    <div class="share-option">
                        <input type="radio" name="shareType" value="link" id="share-link">
                        <label for="share-link">Anyone with the link can access</label>
                    </div>
                    
                    <div id="link-options" class="link-options hidden">
                        <div class="form-group">
                            <label>Permission level:</label>
                            <select id="link-permission">
                                <option value="viewer">Viewer</option>
                                <option value="commenter">Commenter</option>
                                <option value="editor">Editor</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Link expires:</label>
                            <select id="link-expiry">
                                <option value="never">Never</option>
                                <option value="1h">1 hour</option>
                                <option value="1d">1 day</option>
                                <option value="7d">7 days</option>
                                <option value="30d">30 days</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <input type="text" id="share-link-url" readonly placeholder="Share link will appear here">
                            <button id="copy-link-btn" class="btn btn-primary">Copy Link</button>
                        </div>
                    </div>
                </div>
                
                <div class="share-section">
                    <h4>Invite People</h4>
                    <div class="invite-form">
                        <input type="email" id="invite-email" placeholder="Enter email address">
                        <select id="invite-permission">
                            <option value="viewer">Viewer</option>
                            <option value="commenter">Commenter</option>
                            <option value="editor">Editor</option>
                        </select>
                        <button id="send-invite-btn" class="btn btn-primary">Send Invite</button>
                    </div>
                    
                    <div id="invited-users" class="invited-users">
                        <!-- Invited users will appear here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <header class="modal-header">
                <h3>Settings</h3>
                <button class="btn btn-secondary modal-close">‚úï</button>
            </header>
            
            <div class="modal-body">
                <div class="settings-section">
                    <h4>Profile</h4>
                    <div class="profile-info">
                        <img id="settings-avatar" src="" alt="Profile" class="profile-avatar">
                        <div>
                            <div id="settings-name" class="profile-name">Name</div>
                            <div id="settings-email" class="profile-email">email@example.com</div>
                        </div>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h4>Storage (Free Tier)</h4>
                    <div class="storage-details">
                        <div class="storage-bar large">
                            <div class="storage-used" style="width: 0%"></div>
                        </div>
                        <div class="storage-stats">
                            <span>Used: <span id="settings-storage-used">0 MB</span></span>
                            <span>Total: <span id="settings-storage-total">1 GB</span></span>
                        </div>
                        <div class="storage-limitations">
                            <h5>Free Tier Limitations:</h5>
                            <ul>
                                <li>Maximum file size: 1MB per file</li>
                                <li>Total storage: 1GB</li>
                                <li>Files stored in Firestore as base64</li>
                                <li>Unlimited file uploads within size limits</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h4>Appearance</h4>
                    <div class="theme-options">
                        <div class="theme-option">
                            <input type="radio" name="theme" value="light" id="theme-light">
                            <label for="theme-light">‚òÄÔ∏è Light</label>
                        </div>
                        <div class="theme-option">
                            <input type="radio" name="theme" value="dark" id="theme-dark">
                            <label for="theme-dark">üåô Dark</label>
                        </div>
                        <div class="theme-option">
                            <input type="radio" name="theme" value="system" id="theme-system" checked>
                            <label for="theme-system">üíª System</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Hidden file input for upload -->
    <input type="file" id="hidden-file-input" multiple accept="*/*" style="display: none;">

    <!-- Scripts -->
    <script type="module" src="/scripts/app.js"></script>
</body>
</html>
